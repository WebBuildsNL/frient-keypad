{
  "_comment": "This file is generated. Please edit .homeycompose/app.json instead.",
  "id": "com.frient.keypad.coderead",
  "version": "1.0.0",
  "compatibility": ">=12.0.0",
  "sdk": 3,
  "platforms": [
    "local"
  ],
  "name": {
    "en": "Frient Keypad Code Reader"
  },
  "description": {
    "en": "Reads PIN codes entered on a Frient/Develco KEPZB-110 Intelligent Keypad"
  },
  "category": [
    "security"
  ],
  "brandColor": "#1E90FF",
  "permissions": [],
  "api": {
    "getCodes": {
      "method": "GET",
      "path": "/codes"
    },
    "postCodes": {
      "method": "POST",
      "path": "/codes"
    },
    "deleteCodes": {
      "method": "DELETE",
      "path": "/codes"
    }
  },
  "images": {
    "small": "/assets/images/small.png",
    "large": "/assets/images/large.png"
  },
  "author": {
    "name": "Dennis"
  },
  "flow": {
    "triggers": [
      {
        "title": {
          "en": "A code was entered",
          "nl": "Er is een code ingevoerd"
        },
        "hint": {
          "en": "Triggers when a PIN code is entered on the keypad and an arm/disarm button is pressed.",
          "nl": "Wordt geactiveerd wanneer een pincode wordt ingevoerd op het keypad en er op een arm/disarm knop wordt gedrukt."
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=keypad"
          }
        ],
        "tokens": [
          {
            "name": "code",
            "type": "string",
            "title": {
              "en": "PIN code",
              "nl": "Pincode"
            },
            "example": "1234"
          },
          {
            "name": "action",
            "type": "string",
            "title": {
              "en": "Action",
              "nl": "Actie"
            },
            "example": "disarm"
          },
          {
            "name": "zone_id",
            "type": "number",
            "title": {
              "en": "Zone ID",
              "nl": "Zone ID"
            },
            "example": 23
          },
          {
            "name": "code_valid",
            "type": "boolean",
            "title": {
              "en": "Code is valid",
              "nl": "Code is geldig"
            }
          },
          {
            "name": "code_name",
            "type": "string",
            "title": {
              "en": "Code name",
              "nl": "Codenaam"
            },
            "example": "Guest 1"
          }
        ],
        "id": "keypad_code_entered"
      },
      {
        "title": {
          "en": "Emergency button pressed",
          "nl": "Noodknop ingedrukt"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=keypad"
          }
        ],
        "id": "keypad_emergency"
      }
    ],
    "conditions": [
      {
        "title": {
          "en": "Action !{{is|is not}} ...",
          "nl": "Actie !{{is|is niet}} ..."
        },
        "titleFormatted": {
          "en": "Action !{{is|is not}} [[action]]",
          "nl": "Actie !{{is|is niet}} [[action]]"
        },
        "hint": {
          "en": "Check which button was pressed on the keypad.",
          "nl": "Controleer welke knop is ingedrukt op het keypad."
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=keypad"
          },
          {
            "type": "dropdown",
            "name": "action",
            "title": {
              "en": "Action",
              "nl": "Actie"
            },
            "values": [
              {
                "id": "disarm",
                "label": {
                  "en": "Disarm",
                  "nl": "Ontgrendelen"
                }
              },
              {
                "id": "arm_day_zones",
                "label": {
                  "en": "Arm day zones",
                  "nl": "Dagzones inschakelen"
                }
              },
              {
                "id": "arm_night_zones",
                "label": {
                  "en": "Arm night zones",
                  "nl": "Nachtzones inschakelen"
                }
              },
              {
                "id": "arm_all_zones",
                "label": {
                  "en": "Arm all zones",
                  "nl": "Alle zones inschakelen"
                }
              }
            ]
          }
        ],
        "id": "action_is"
      },
      {
        "title": {
          "en": "The entered code !{{is|is not}} valid",
          "nl": "De ingevoerde code !{{is|is niet}} geldig"
        },
        "hint": {
          "en": "Checks if the last entered code exists in the stored access codes and is within its valid date range.",
          "nl": "Controleert of de laatst ingevoerde code bestaat in de opgeslagen toegangscodes en binnen het geldige datumbereik valt."
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=keypad"
          }
        ],
        "id": "code_is_valid"
      },
      {
        "title": {
          "en": "Last entered code !{{is|is not}} ...",
          "nl": "Laatst ingevoerde code !{{is|is niet}} ..."
        },
        "titleFormatted": {
          "en": "Last entered code !{{is|is not}} [[code]]",
          "nl": "Laatst ingevoerde code !{{is|is niet}} [[code]]"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=keypad"
          },
          {
            "type": "text",
            "name": "code",
            "title": {
              "en": "PIN code",
              "nl": "Pincode"
            },
            "placeholder": "1234"
          }
        ],
        "id": "last_code_is"
      }
    ],
    "actions": [
      {
        "title": {
          "en": "Accept the entered code",
          "nl": "Accepteer de ingevoerde code"
        },
        "titleFormatted": {
          "en": "Accept the entered code",
          "nl": "Accepteer de ingevoerde code"
        },
        "hint": {
          "en": "Confirms the code on the keypad (green LED). Place this in the THEN branch of your flow.",
          "nl": "Bevestigt de code op het keypad (groene LED). Plaats dit in de DAN-tak van je flow."
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=keypad"
          }
        ],
        "id": "accept_code"
      },
      {
        "title": {
          "en": "Reject the entered code",
          "nl": "Weiger de ingevoerde code"
        },
        "titleFormatted": {
          "en": "Reject the entered code",
          "nl": "Weiger de ingevoerde code"
        },
        "hint": {
          "en": "Rejects the code on the keypad (red LED). Place this in the ELSE branch of your flow.",
          "nl": "Weigert de code op het keypad (rode LED). Plaats dit in de ANDERS-tak van je flow."
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=keypad"
          }
        ],
        "id": "reject_code"
      },
      {
        "title": {
          "en": "Set keypad mode to ...",
          "nl": "Zet keypad modus naar ..."
        },
        "titleFormatted": {
          "en": "Set keypad mode to [[mode]]",
          "nl": "Zet keypad modus naar [[mode]]"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=keypad"
          },
          {
            "type": "dropdown",
            "name": "mode",
            "title": {
              "en": "Mode"
            },
            "values": [
              {
                "id": "disarm",
                "title": {
                  "en": "Disarm",
                  "nl": "Ontwapenen"
                }
              },
              {
                "id": "arm_day_zones",
                "title": {
                  "en": "Arm Day (Home)",
                  "nl": "Arm Dag (Thuis)"
                }
              },
              {
                "id": "arm_night_zones",
                "title": {
                  "en": "Arm Night",
                  "nl": "Arm Nacht"
                }
              },
              {
                "id": "arm_all_zones",
                "title": {
                  "en": "Arm All (Away)",
                  "nl": "Arm Alles (Weg)"
                }
              }
            ]
          }
        ],
        "id": "set_keypad_mode"
      }
    ]
  },
  "drivers": [
    {
      "name": {
        "en": "Frient Intelligent Keypad",
        "nl": "Frient Intelligent Keypad"
      },
      "class": "homealarm",
      "capabilities": [
        "alarm_tamper",
        "measure_battery",
        "alarm_battery"
      ],
      "energy": {
        "batteries": [
          "AA",
          "AA",
          "AA",
          "AA"
        ]
      },
      "zigbee": {
        "manufacturerName": [
          "frient A/S",
          "Develco Products A/S"
        ],
        "productId": [
          "KEPZB-110",
          "KEYZB-110"
        ],
        "endpoints": {
          "44": {
            "clusters": [
              0,
              1,
              3,
              32,
              1280
            ],
            "bindings": [
              1281
            ]
          }
        },
        "learnmode": {
          "instruction": {
            "en": "Press and hold the small reset button on the back of the keypad for 10 seconds until the LED flashes.",
            "nl": "Houd de kleine resetknop aan de achterkant van het keypad 10 seconden ingedrukt totdat de LED knippert."
          }
        }
      },
      "platforms": [
        "local"
      ],
      "connectivity": [
        "zigbee"
      ],
      "images": {
        "small": "/drivers/keypad/assets/images/small.png",
        "large": "/drivers/keypad/assets/images/large.png"
      },
      "id": "keypad"
    }
  ]
}